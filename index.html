<section id="speaker" class="test-section">
            <h2 class="text-xl font-black text-blue-400 mb-10 uppercase italic tracking-widest">Speaker Stereo Test</h2>
            
            <div class="flex gap-20 items-center mb-10">
                <div id="spk-L" class="spk-unit flex flex-col items-center">
                    <div class="w-32 h-48 bg-slate-800 rounded-3xl border-4 border-slate-700 flex flex-col items-center p-6 gap-4 relative overflow-hidden">
                        <div id="vis-L" class="absolute bottom-0 left-0 w-full bg-blue-500/20 transition-all duration-100" style="height: 0%"></div>
                        <div class="w-12 h-12 rounded-full bg-slate-900 border-2 border-slate-600 z-10"></div>
                        <div class="w-20 h-20 rounded-full bg-slate-900 border-2 border-slate-600 flex items-center justify-center z-10">
                            <i class="fas fa-volume-up text-slate-700 text-2xl"></i>
                        </div>
                    </div>
                    <span class="mt-4 font-black text-blue-500">LEFT CHANNEL</span>
                </div>

                <div id="spk-R" class="spk-unit flex flex-col items-center">
                    <div class="w-32 h-48 bg-slate-800 rounded-3xl border-4 border-slate-700 flex flex-col items-center p-6 gap-4 relative overflow-hidden">
                        <div id="vis-R" class="absolute bottom-0 left-0 w-full bg-blue-500/20 transition-all duration-100" style="height: 0%"></div>
                        <div class="w-12 h-12 rounded-full bg-slate-900 border-2 border-slate-600 z-10"></div>
                        <div class="w-20 h-20 rounded-full bg-slate-900 border-2 border-slate-600 flex items-center justify-center z-10">
                            <i class="fas fa-volume-up text-slate-700 text-2xl"></i>
                        </div>
                    </div>
                    <span class="mt-4 font-black text-blue-500">RIGHT CHANNEL</span>
                </div>
            </div>

            <div class="flex flex-col items-center gap-6">
                <div class="flex gap-4">
                    <button onclick="playMusic(-1, 'L')" class="bg-blue-600 hover:bg-blue-500 px-8 py-3 rounded-xl font-bold uppercase text-xs transition-all shadow-lg shadow-blue-900/20">Chỉ Loa Trái</button>
                    <button onclick="playMusic(0, 'both')" class="bg-slate-700 hover:bg-slate-600 px-8 py-3 rounded-xl font-bold uppercase text-xs transition-all">Cả Hai Bên</button>
                    <button onclick="playMusic(1, 'R')" class="bg-blue-600 hover:bg-blue-500 px-8 py-3 rounded-xl font-bold uppercase text-xs transition-all shadow-lg shadow-blue-900/20">Chỉ Loa Phải</button>
                </div>
                <button onclick="stopMusic()" class="text-red-500 font-bold uppercase text-[10px] tracking-widest hover:text-red-400">Dừng phát nhạc</button>
            </div>
            
            <audio id="testAudioSrc" loop crossorigin="anonymous" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3"></audio>
        </section>

    <script>
        // JS CHO PHẦN LOA CÓ NHẠC
        let audioContext, audioSource, panner, gainNode, analyser;
        const audioEle = document.getElementById('testAudioSrc');

        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                audioSource = audioContext.createMediaElementSource(audioEle);
                panner = audioContext.createStereoPanner();
                analyser = audioContext.createAnalyser();
                gainNode = audioContext.createGain();

                audioSource.connect(panner).connect(gainNode).connect(analyser).connect(audioContext.destination);
                
                // Vòng lặp vẽ sóng nhạc
                visualize();
            }
        }

        function playMusic(panValue, side) {
            initAudio();
            if (audioContext.state === 'suspended') audioContext.resume();
            
            panner.pan.value = panValue;
            audioEle.play();

            // Hiệu ứng highlight loa
            document.querySelectorAll('.spk-unit').forEach(el => el.classList.remove('spk-active'));
            if(side === 'both') {
                document.getElementById('spk-L').classList.add('spk-active');
                document.getElementById('spk-R').classList.add('spk-active');
            } else {
                document.getElementById('spk-' + side).classList.add('spk-active');
            }
        }

        function stopMusic() {
            if(audioEle) {
                audioEle.pause();
                audioEle.currentTime = 0;
                document.querySelectorAll('.spk-unit').forEach(el => el.classList.remove('spk-active'));
            }
        }

        function visualize() {
            const dataArray = new Uint8Array(analyser.frequencyBinCount);
            analyser.getByteFrequencyData(dataArray);
            
            // Tính toán mức âm lượng trung bình để làm hiệu ứng sóng
            const volume = dataArray.reduce((a, b) => a + b) / dataArray.length;
            const height = Math.min(volume * 1.5, 100) + '%';

            const p = panner.pan.value;
            // Hiển thị sóng nhạc theo kênh đang phát
            if (p <= 0) document.getElementById('vis-L').style.height = height; else document.getElementById('vis-L').style.height = '0%';
            if (p >= 0) document.getElementById('vis-R').style.height = height; else document.getElementById('vis-R').style.height = '0%';

            requestAnimationFrame(visualize);
        }

        // Các hàm showTab, handleMouse, handleWheel... của Anh Duy Tech GIỮ NGUYÊN NHƯ CŨ
    </script>
